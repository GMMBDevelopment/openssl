# This script is a temporary solution until I get autoconf to work.
#
# Note that on most systems, the openssl headers and lib will be found
# automatically if present, hence this script is not really required.
#
# On CRAN, we use $OPENSSL_INCLUDES. Elsewhere we default to the
# standard linux location: /usr/include/openssl.
if [ -z "$OPENSSL_INCLUDES" ]; then
  OPENSSL_INCLUDES="/usr/include/openssl"
fi

# Add include this to Makevars
echo "PKG_CPPFLAGS= -I$OPENSSL_INCLUDES" >> src/Makevars

# Verify that openssl RNG is present
if [ ! -e $OPENSSL_INCLUDES/rand.h ]; then
  echo "File $OPENSSL_INCLUDES/rand.h not found. Make sure libssl-dev (deb) or openssl-devel (rpm) is installed."
  exit 1
fi
